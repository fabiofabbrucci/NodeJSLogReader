<!DOCTYPE html>
<html>
<head>
  <title>NodeJsLogReader</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>

  <style>
    body
      { color: #1a2c37;
        font-family: 'Helvetica', sans-serif; font-size: 86%;
        padding: 2em; }
    #info
      { font-size: 120%;
        font-weight: bold; }
    #tail
      { border: 1px solid #ccc;
        height: 300px;
        padding: 0.5em;
        overflow: hidden;
        position: relative;
        overflow-y: scroll; }
  </style>

</head>
<body>
    <select name="log_file" id="log_file">
        <option></option>
        <option value="/var/log/apache2/access_log">Access Apache</option>
    </select>
    <pre id="info"></pre>
    <pre id="tail"></pre>

  <script>

    var socket = io.connect('http://localhost:8080/');
    
    socket.on('clear', function () {
      $('#tail').html('');
    });
    
    socket.on('tail', function (msg) {
      $('#tail').prepend(msg);
    });
    
    $('#log_file').change(function(){
        socket.emit('log_file', $('#log_file').val());
    });
  </script>

</body>
</html>